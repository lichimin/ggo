# 游戏接口文档

##接口地址
`https://www.godqb.com/`


## 1. 注册接口

### 接口路径
`POST /api/v1/login`

### 功能说明
该接口同时处理用户登录和注册功能。如果用户名不存在，则自动创建新用户。

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `username` | `string` | 是 | 用户名（长度1-50个字符） |
| `password` | `string` | 是 | 密码（长度3-50个字符） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `user_id` | `uint` | 用户ID |
| `username` | `string` | 用户名 |
| `img` | `string` | 用户头像URL |
| `gold` | `int` | 金币数量 |
| `level` | `int` | 用户等级 |
| `token` | `string` | JWT令牌（用于后续接口认证） |

## 2. 获取宝物列表接口

### 接口路径
`GET /api/v1/treasures`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `name` | `string` | 否 | 宝物名称（模糊查询） |
| `level` | `int` | 否 | 宝物等级（筛选小于等于该等级的宝物） |
| `is_active` | `bool` | 否 | 是否激活 |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 宝物ID |
| `name` | `string` | 宝物名称 |
| `image_url` | `string` | 宝物图片URL |
| `level` | `int` | 宝物等级 |
| `value` | `int` | 宝物价值 |
| `description` | `string` | 宝物描述 |
| `is_active` | `bool` | 是否激活 |
| `created_at` | `time.Time` | 创建时间 |
| `updated_at` | `time.Time` | 更新时间 |

## 3. 获取我的宝物接口

### 接口路径
`GET /api/v1/my-items/treasures`

### 请求参数
无

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 宝物ID |
| `my_item_id` | `uint` | 我的物品ID |
| `name` | `string` | 宝物名称 |
| `image_url` | `string` | 宝物图片URL |
| `level` | `int` | 宝物等级 |
| `value` | `int` | 宝物价值 |
| `quantity` | `int` | 宝物数量 |
| `description` | `string` | 宝物描述 |

## 4. 保存宝物接口

### 接口路径
`POST /api/v1/my-items`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `items` | `[]object` | 是 | 宝物列表 |
| `items[].item_id` | `uint` | 是 | 宝物ID |
| `items[].quantity` | `int` | 是 | 宝物数量（至少1个） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 我的物品ID |
| `user_id` | `uint` | 用户ID |
| `item_id` | `uint` | 宝物ID |
| `item_type` | `string` | 物品类型（treasure） |
| `sell_price` | `int` | 出售价格 |
| `position` | `string` | 位置（默认backpack） |
| `quantity` | `int` | 宝物数量 |
| `item_name` | `string` | 宝物名称 |
| `created_at` | `time.Time` | 创建时间 |
| `updated_at` | `time.Time` | 更新时间 |

## 5. 批量出售宝物接口

### 接口路径
`POST /api/v1/my-items/sell-multiple`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `items` | `[]object` | 是 | 出售物品列表 |
| `items[].my_item_id` | `uint` | 是 | 我的物品ID |
| `items[].quantity` | `int` | 是 | 出售数量 |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `message` | `string` | 操作结果消息 |
| `total_price` | `int` | 总出售价格 |
| `current_gold` | `int` | 当前金币数量 |
| `sold_items` | `[]object` | 已出售物品列表 |
| `sold_items[].my_item_id` | `uint` | 我的物品ID |
| `sold_items[].name` | `string` | 宝物名称 |
| `sold_items[].quantity` | `int` | 出售数量 |
| `sold_items[].price` | `int` | 单个价格 |
| `sold_items[].total` | `int` | 该物品总价格 |

## 6. 合成装备接口

### 接口路径
`POST /api/v1/equipments/generate`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `itemids` | `[]uint` | 是 | 宝物ID列表（固定3个，可以重复） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `message` | `string` | 操作结果消息 |
| `cost_gold` | `int` | 消耗金币 |
| `current_gold` | `int` | 当前金币数量 |
| `equipment_level` | `int` | 装备等级 |
| `user_equipment` | `object` | 用户装备信息 |
| `user_equipment.id` | `uint` | 装备ID |
| `user_equipment.user_id` | `uint` | 用户ID |
| `user_equipment.equipment_id` | `uint` | 装备模板ID |
| `user_equipment.enhance_level` | `int` | 强化等级 |
| `user_equipment.is_equipped` | `bool` | 是否穿戴 |
| `user_equipment.position` | `string` | 位置 |
| `user_equipment.equipment_template` | `object` | 装备模板信息 |
| `user_equipment.additional_attrs` | `[]object` | 附加属性列表 |
| `used_treasures` | `[]object` | 使用的宝物列表 |
| `selected_treasure_index` | `int` | 选中的宝物索引 |

## 7. 强化装备接口

### 接口路径
`POST /api/v1/equipments/:id/enhance`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `id` | `uint` | 是 | 装备ID（路径参数） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `message` | `string` | 操作结果消息 |
| `success` | `bool` | 是否强化成功 |
| `equipment_id` | `uint` | 装备ID |
| `previous_level` | `int` | 强化前等级 |
| `current_level` | `int` | 强化后等级 |
| `cost_gold` | `int` | 消耗金币 |
| `current_gold` | `int` | 当前金币数量 |

## 8. 获取穿戴中的装备接口

### 接口路径
`GET /api/v1/equipments/my`（返回的`equipped`字段）

### 请求参数
无

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 装备ID |
| `name` | `string` | 装备名称 |
| `image_url` | `string` | 装备图片URL |
| `rarity` | `string` | 稀有度 |
| `slot` | `string` | 部位 |
| `enhance_level` | `int` | 强化等级 |
| `base_attributes` | `object` | 基础属性 |
| `base_attributes.生命值` | `int` | 生命值 |
| `base_attributes.攻击力` | `int` | 攻击力 |
| `base_attributes.攻击速度` | `float64` | 攻击速度 |
| `additional_attrs` | `[]object` | 附加属性 |
| `additional_attrs[].name` | `string` | 属性名称 |
| `additional_attrs[].value` | `string` | 属性值 |
| `rare_attrs` | `[]object` | 稀有属性 |
| `rare_attrs[].name` | `string` | 稀有属性名称和值 |

## 9. 获取未穿戴中的装备接口

### 接口路径
`GET /api/v1/equipments/my`（返回的`unequipped`字段）

### 请求参数
无

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 装备ID |
| `name` | `string` | 装备名称 |
| `image_url` | `string` | 装备图片URL |
| `rarity` | `string` | 稀有度 |
| `slot` | `string` | 部位 |
| `enhance_level` | `int` | 强化等级 |
| `base_attributes` | `object` | 基础属性 |
| `base_attributes.生命值` | `int` | 生命值 |
| `base_attributes.攻击力` | `int` | 攻击力 |
| `base_attributes.攻击速度` | `float64` | 攻击速度 |
| `additional_attrs` | `[]object` | 附加属性 |
| `additional_attrs[].name` | `string` | 属性名称 |
| `additional_attrs[].value` | `string` | 属性值 |
| `rare_attrs` | `[]object` | 稀有属性 |
| `rare_attrs[].name` | `string` | 稀有属性名称和值 |

## 10. 穿戴装备接口

### 接口路径
`PUT /api/v1/equipments/:id/equip`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `id` | `uint` | 是 | 装备ID（路径参数） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `message` | `string` | 操作结果消息 |
| `equipment` | `object` | 装备信息 |
| `equipment.id` | `uint` | 装备ID |
| `equipment.is_equipped` | `bool` | 是否穿戴 |
| `equipment.position` | `string` | 位置 |
| `slot` | `string` | 装备部位 |

## 11. 脱下装备接口

### 接口路径
`PUT /api/v1/equipments/:id/unequip`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `id` | `uint` | 是 | 装备ID（路径参数） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `message` | `string` | 操作结果消息 |
| `equipment` | `object` | 装备信息 |
| `equipment.id` | `uint` | 装备ID |
| `equipment.is_equipped` | `bool` | 是否穿戴 |
| `equipment.position` | `string` | 位置 |

## 12. 获取穿戴中皮肤接口

### 接口路径
`GET /api/v1/user/skins/active`

### 请求参数
无

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 用户皮肤ID |
| `user_id` | `uint` | 用户ID |
| `skin_id` | `uint` | 皮肤ID |
| `is_active` | `bool` | 是否激活 |
| `skin` | `object` | 皮肤信息 |
| `skin.id` | `uint` | 皮肤ID |
| `skin.name` | `string` | 皮肤名称 |
| `skin.image_url` | `string` | 皮肤图片URL |
| `skin.hp` | `int` | 生命值加成 |
| `skin.attack` | `int` | 攻击力加成 |
| `skin.atk_speed` | `float64` | 攻击速度加成 |
| `skin.critical_rate` | `float64` | 暴击率加成 |
| `skin.critical_damage` | `float64` | 暴击伤害加成 |
| `skin.atk_type` | `int` | 攻击类型 |

## 13. 获取玩家皮肤列表接口

### 接口路径
`GET /api/v1/user/skins`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| ------ | ---- | ---- | ---- |
| `is_active` | `bool` | 否 | 是否激活（可选） |

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `id` | `uint` | 用户皮肤ID |
| `user_id` | `uint` | 用户ID |
| `skin_id` | `uint` | 皮肤ID |
| `is_active` | `bool` | 是否激活 |
| `skin` | `object` | 皮肤信息 |
| `skin.id` | `uint` | 皮肤ID |
| `skin.name` | `string` | 皮肤名称 |
| `skin.image_url` | `string` | 皮肤图片URL |
| `skin.hp` | `int` | 生命值加成 |
| `skin.attack` | `int` | 攻击力加成 |
| `skin.atk_speed` | `float64` | 攻击速度加成 |
| `skin.critical_rate` | `float64` | 暴击率加成 |
| `skin.critical_damage` | `float64` | 暴击伤害加成 |
| `skin.atk_type` | `int` | 攻击类型 |

## 14. 获取我的属性接口

### 接口路径
`GET /api/v1/user/attributes`

### 请求参数
无

### 返回参数
| 参数名 | 类型 | 说明 |
| ------ | ---- | ---- |
| `生命值` | `int` | 生命值 |
| `攻击力` | `int` | 攻击力 |
| `攻击速度` | `float64` | 攻击速度 |
| `移动速度` | `string` | 移动速度（百分比） |
| `子弹速度` | `string` | 子弹速度（百分比） |
| `吸血` | `string` | 吸血（百分比） |
| `暴击率` | `float64` | 暴击率 |
| `暴击伤害` | `float64` | 暴击伤害 |
| `减伤` | `float64` | 减伤（百分比） |
| `最大HP提升` | `string` | 最大HP提升（百分比） |
| `暴击伤害提升` | `string` | 暴击伤害提升（百分比） |
| `攻速提升` | `string` | 攻速提升（百分比） |
| `秒杀几率` | `string` | 秒杀几率（固定值） |
| `生命恢复` | `int` | 生命恢复（固定值） |
| `暴击率提升` | `string` | 暴击率提升（百分比） |
| `攻击力提升` | `string` | 攻击力提升（百分比） |